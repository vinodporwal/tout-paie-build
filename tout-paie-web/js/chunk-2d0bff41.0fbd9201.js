(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bff41"],{"405d":function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-card",{attrs:{header:t.$t("Store_Advertisement")}},[o("b-button",{staticClass:"mr-1 mb-2 mt-xl-n2 pull-right",staticStyle:{"background-color":"#ef402b","border-color":"#C33421",color:"white"},attrs:{type:"button"},on:{click:function(e){t.imgupload=null,t.$refs.addStoreAdvModel.show(),t.clearObjects()}}},[t._v(t._s(t.$t("Add_Store_Advertisement")))]),o("b-table",{attrs:{dark:t.dark,"sort-by":t.sortBy,hover:t.hover,striped:t.striped,bordered:t.bordered,small:t.small,fixed:t.fixed,responsive:"lg",items:t.gridData,fields:t.captions,"current-page":t.currentPage,"per-page":t.perPage},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e}},scopedSlots:t._u([{key:"actions",fn:function(e){return[o("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"icon mr-2 anchor-pointer",attrs:{title:t.$t("Update")},on:{click:function(o){t.clearObjects(),t.showLoader=!1,t.editUser=!0,t.selectObject(e.item),t.$refs.editStoreAdvModel.show()}}},[o("i",{staticClass:"fa font-2x2 fa-pencil",attrs:{id:"editIcon"}})]),o("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"icon anchor-pointer",attrs:{title:t.$t("Delete")},on:{click:function(o){t.clearObjects(),t.showLoader=!1,t.selectObject(e.item),t.$refs.deleteStoreAdvModel.show()}}},[o("i",{staticClass:"cui-trash font-2x2 icons mt-1"})])]}},{key:"image",fn:function(e){return[o("b-img",{staticStyle:{height:"100px",width:"100px","z-index":"10"},attrs:{thumbnail:"",src:t.ApiEndPoints+"images/"+e.item.StoreImage,rounded:"left"}})]}},{key:"active",fn:function(e){return["Active"==e.item.active?o("label",{staticStyle:{color:"#008000"}},[o("b",[t._v(t._s(e.item.active))])]):t._e(),"Active"!=e.item.active?o("label",{staticStyle:{color:"#ef402b"}},[o("b",[t._v(t._s(e.item.active))])]):t._e()]}}])}),0==t.gridData.length?o("div",{staticClass:"pt-1 pb-4"},[o("div",{staticClass:"text-center"},[o("b-spinner",{attrs:{variant:"primary",label:"Text Centered"}})],1)]):t._e(),o("nav",[o("b-pagination",{staticClass:"pull-right",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,"prev-text":"Prev","next-text":"Next","hide-goto-end-buttons":""},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),o("b-modal",{ref:"deleteStoreAdvModel",staticClass:"modal-primary",attrs:{"no-close-on-backdrop":"",title:t.$t("Delete_Store_Advertisement")}},[o("p",[t._v(t._s(t.$t("Are_you_sure_you_want_to_Delete_Store_Advertisement"))+" "),o("b",{staticStyle:{color:"#ef402b"}}),t._v(" ?")]),o("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[o("b-button",{staticClass:"float-right ml-2 ",attrs:{type:"button"},on:{click:function(e){t.$refs.deleteStoreAdvModel.hide(),t.clearObjects()}}},[o("i",{staticClass:"fa fa-close"}),t._v(" "+t._s(t.$t("Cancel")))]),o("b-button",{staticClass:"float-right ml-2 ",staticStyle:{"background-color":"#ef402b","border-color":"#C33421",color:"white"},attrs:{type:"button",variant:"primary"},on:{click:function(e){t.deleteItem(t.$refs.deleteStoreAdvModel,t.selectedStoreAdv),t.clearObjects()}}},[o("i",{staticClass:"fa fa-dot-circle-o"}),t._v(" "+t._s(t.$t("Confirm")))])],1)]),o("b-modal",{ref:"addStoreAdvModel",staticClass:"modal-primary",attrs:{"no-close-on-backdrop":"",size:"lg","hide-footer":"",title:t.$t("Add_Store_Advertisement")}},[o("b-form",{on:{submit:function(e){e.stopPropagation(),e.preventDefault(),t.showLoader=!0,t.saveItem(t.$refs.addStoreAdvModel,t.StoreAdv)}}},[o("b-row",[o("b-col",{attrs:{md:"6"}},[o("b-form-group",{attrs:{validated:"",label:t.$t("Select_store")}},[o("b-input-group",[o("b-form-select",{attrs:{"v-on:change":t.changeStore(t.StoreAdv.StoreID),required:""},model:{value:t.StoreAdv.StoreID,callback:function(e){t.$set(t.StoreAdv,"StoreID",e)},expression:"StoreAdv.StoreID"}},[o("option",{attrs:{disabled:""},domProps:{value:null}},[t._v(t._s(t.$t("Please_select_store")))]),t._l(t.storeList,function(e){return o("option",{key:e.StoreID,domProps:{value:e.StoreID}},[t._v(t._s(e.StoreName))])})],2)],1)],1)],1),o("b-col",{attrs:{md:"6"}},[o("b-form-group",{attrs:{label:t.$t("Select_Department"),validated:""}},[o("b-form-select",{model:{value:t.StoreAdv.DepartmentID,callback:function(e){t.$set(t.StoreAdv,"DepartmentID",e)},expression:"StoreAdv.DepartmentID"}},[o("option",{domProps:{value:null}},[t._v(t._s(t.$t("Physical_Store_Does_not_exist")))]),t._l(t.departmentList,function(e){return o("option",{key:e.DepartmentID,domProps:{value:e.DepartmentID}},[t._v(t._s(e.DepartmentName))])})],2)],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"6"}},[o("b-form-group",{attrs:{validated:"",label:t.$t("Store_Img")}}),o("div",[t.imgupload?t._e():o("div",[o("input",{attrs:{type:"file"},on:{change:t.onFileChange}})]),t.imgupload?o("div",[o("img",{staticStyle:{height:"30vh",width:"30vh","margin-bottom":"10px"},attrs:{src:t.imgupload}}),o("button",{on:{click:t.removeImage}},[t._v("Remove image")])]):t._e()])],1)],1),o("hr",{staticStyle:{margin:"20px -20px"}}),o("div",{staticClass:"w-100 text-right",attrs:{slot:"modal-footer"},slot:"modal-footer"},[0==t.showLoader?o("b-button",{staticClass:"ml-2",staticStyle:{"background-color":"#ef402b","border-color":"#C33421",color:"white"},attrs:{type:"submit"}},[o("i",{staticClass:"fa fa-dot-circle-o"}),t._v(" "+t._s(t.$t("Save")))]):t._e(),1==t.showLoader?o("b-button",{attrs:{variant:"primary"}},[o("b-spinner",{attrs:{small:""}}),o("span",{staticClass:"sr-only"},[t._v("Loading...")])],1):t._e(),o("b-button",{staticClass:"ml-2",attrs:{type:"button"},on:{click:function(e){return t.$refs.addStoreAdvModel.hide()}}},[o("i",{staticClass:"fa fa-close"}),t._v(" "+t._s(t.$t("Cancel")))])],1)],1)],1),o("b-modal",{ref:"editStoreAdvModel",staticClass:"modal-primary",attrs:{"no-close-on-backdrop":"",size:"lg","hide-footer":"",title:t.$t("edit_Store_Advertisement")}},[o("b-form",{on:{submit:function(e){e.stopPropagation(),e.preventDefault(),t.showLoader=!0,t.updateItem(t.$refs.editStoreAdvModel,t.editAdv)}}},[o("b-row",[o("b-col",{attrs:{md:"6"}},[o("b-form-group",{attrs:{validated:"",label:t.$t("Select_store")}},[o("b-input-group",[o("b-form-select",{attrs:{required:""},on:{c:function(e){return t.changeStore(t.editAdv.StoreID)}},model:{value:t.editAdv.StoreID,callback:function(e){t.$set(t.editAdv,"StoreID",e)},expression:"editAdv.StoreID"}},[o("option",{attrs:{disabled:""},domProps:{value:null}},[t._v(t._s(t.$t("Please_select_store")))]),t._l(t.storeList,function(e){return o("option",{key:e.StoreID,domProps:{value:e.StoreID}},[t._v(t._s(e.StoreName))])})],2)],1)],1)],1),o("b-col",{attrs:{md:"6"}},[o("b-form-group",{attrs:{label:t.$t("Select_Department"),validated:""}},[o("b-form-select",{attrs:{required:""},model:{value:t.editAdv.DepartmentID,callback:function(e){t.$set(t.editAdv,"DepartmentID",e)},expression:"editAdv.DepartmentID"}},[o("option",{attrs:{value:"null"}},[t._v(t._s(t.$t("Please_select_department")))]),t._l(t.departmentList,function(e){return o("option",{key:e.DepartmentID,domProps:{value:e.DepartmentID}},[t._v(t._s(e.DepartmentName))])})],2)],1)],1)],1),o("b-row",[o("b-col",{attrs:{md:"6"}},[o("b-form-group",{attrs:{label:t.$t("Store_Img")}}),o("div",[t.imgupload?t._e():o("div",[o("input",{attrs:{type:"file"},on:{change:t.onFileChange}})]),t.imgupload?o("div",[o("img",{staticStyle:{height:"30vh",width:"30vh","margin-bottom":"10px"},attrs:{src:t.imgupload}}),o("button",{on:{click:t.removeImage}},[t._v("Remove image")])]):t._e()])],1)],1),o("hr",{staticStyle:{margin:"20px -20px"}}),o("div",{staticClass:"w-100 text-right",attrs:{slot:"modal-footer"},slot:"modal-footer"},[0==t.showLoader?o("b-button",{staticClass:"ml-2",staticStyle:{"background-color":"#ef402b","border-color":"#C33421",color:"white"},attrs:{type:"submit"}},[o("i",{staticClass:"fa fa-dot-circle-o"}),t._v(" "+t._s(t.$t("Save")))]):t._e(),1==t.showLoader?o("b-button",{attrs:{variant:"primary"}},[o("b-spinner",{attrs:{small:""}}),o("span",{staticClass:"sr-only"},[t._v("Loading...")])],1):t._e(),o("b-button",{staticClass:"ml-2",attrs:{type:"button"},on:{click:function(e){return t.$refs.editStoreAdvModel.hide()}}},[o("i",{staticClass:"fa fa-close"}),t._v(" "+t._s(t.$t("Cancel")))])],1)],1)],1)],1)},a=[],s=o("bd86"),i=o("e440"),n=o.n(i),l=o("9746"),d={props:{caption:{type:String,default:"Managers"},hover:{type:Boolean,default:!0},striped:{type:Boolean,default:!0},bordered:{type:Boolean,default:!1},small:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1},dark:{type:Boolean,default:!1}},data:function(){var t;return t={file:null,StoreAdv:{DepartmentID:""},selectedStoreAdv:{},saveProductGroup:{},loginUser:{},editUser:!1,storesList:[],departmentList:[],ApiEndPoints:"",sortBy:"StoreName",pageOptions:[5,10,15],currentPage:1},Object(s["a"])(t,"file",null),Object(s["a"])(t,"imgupload",""),Object(s["a"])(t,"editAdv",{}),Object(s["a"])(t,"storeList",[]),Object(s["a"])(t,"showLoader",!1),Object(s["a"])(t,"buildingsList",[]),Object(s["a"])(t,"perPage",10),Object(s["a"])(t,"StoreAdvList",[]),Object(s["a"])(t,"otherAddr",[{storeName:null,city:null,pincode:null}]),t},computed:{fields:function(){return[{key:"image",label:this.translateString("Store_Img"),sortable:!0},{key:"DepartmentName",label:this.translateString("Deparment_Name"),sortable:!0},{key:"actions",label:this.translateString("Action"),sortable:!1,thStyle:{width:"70px !important","min-width":"70px !important"}}]},gridData:function(){return this.StoreAdvList},totalRows:function(){return this.getRowCount()},captions:function(){return this.fields}},methods:{translateString:function(t){return this.$i18n.t(t)},getRowCount:function(){return this.StoreAdvList.length},selectObject:function(t){this.selectedStoreAdv=t,this.editAdv=t,this.editAdv.StoreImagePath=l["a"]+"images/"+this.editAdv.StoreImage,this.imgupload=l["a"]+"images/"+this.editAdv.StoreImage},getDeparment:function(){var t=this;l["c"]("departments").then(function(e){t.departmentList=e.data,t.getStoreAdv()})},selectImage:function(t){console.log(t);var e=document.getElementById("myFile");alert(e.value),console.log(e)},onFileChange:function(t){var e=t.target.files||t.dataTransfer.files;this.editUser?this.editAdv.StoreImage=t.target.files[0]:this.StoreAdv.StoreImage=t.target.files[0],e.length&&this.createImage(e[0])},createImage:function(t){new Image;var e=new FileReader,o=this;e.onload=function(t){o.imgupload=t.target.result},e.readAsDataURL(t)},removeImage:function(t){this.imgupload=""},changeStore:function(t){for(var e=0;e<this.storeList.length;e++)if(this.storeList[e].StoreID==t)return"Y"==this.storeList[e].IsNonPhysicalStore?(this.StoreAdv.DepartmentID=this.storeList[e].storeDepartment[0].DepartmentID,void console.log(t,"->",this.StoreAdv.DepartmentID)):void(this.StoreAdv.DepartmentID=null)},getStores:function(){var t=this,e=null;e="store",l["c"](e).then(function(e){t.storeList=e.data})},deleteItem:function(t,e){var o=this;console.log("in delete function");var r="store/adv/delete/"+e.StoreAdvertisementID;l["e"](e,r).then(function(e){console.log("data",e);var r=e.data[0].message;200==e.status&&"Success"==r?(o.StoreAdv={},o.getStoreAdv(),o.clearObjects(),t.hide(),n.a.success({message:"Store  Advertisement Deleted Successfully",timeout:3e3})):n.a.error({message:o.translateString(r),timeout:2500})})},updateItem:function(t,e){console.log("in update function"),this.editUser=!0;for(var o=0;o<this.StoreAdvList.length;o++)if(this.StoreAdvList[o].DepartmentID==e.DepartmentID&&this.StoreAdvList[o].StoreAdvertisementID!=e.StoreAdvertisementID)return n.a.error({message:this.translateString("department_allready_exits"),timeout:2500}),void(this.showLoader=!1);this.saveItem(t,e)},clearObjects:function(){this.StoreAdv={},this.StoreAdv.DepartmentID=null,this.editAdv={},this.imgupload="",this.editUser=!1,this.getStoreAdv()},saveItem:function(t,e){var o=this;console.log("in save itom function");var r=null;this.editUser?(r="store/adv/update/"+e.StoreAdvertisementID,this.imgupload||(e.StoreImage="")):r="store/adv/save";var a=new FormData;a.append("StoreImage",e.StoreImage),a.append("StoreID",e.StoreID),a.append("DepartmentID",e.DepartmentID),l["e"](a,r).then(function(e){console.log("data",e);var r=e.data[0].message;200==e.status&&"Success"==r?(o.StoreAdv={},o.imgupload="",o.showLoader=!1,o.clearObjects(),o.getStoreAdv(),t.hide(),n.a.success({message:o.translateString("Store_Advertisement_Successfully"),timeout:3e3})):(o.showLoader=!1,n.a.error({message:o.translateString(r),timeout:2500}))})},getStoreAdv:function(){var t=this;l["c"]("store/all/adv/get/adv").then(function(e){if(t.StoreAdvList=e.data,t.StoreAdvList.length>0)for(var o=0;o<t.StoreAdvList.length;o++)for(var r=0;r<t.departmentList.length;r++)t.StoreAdvList[o].DepartmentID==t.departmentList[r].DepartmentID&&(t.StoreAdvList[o].DepartmentName=t.departmentList[r].DepartmentName);console.log("StoreAdvList :",t.StoreAdvList),t.loginUser=JSON.parse(window.localStorage.getItem("loginUser"))})}},beforeMount:function(){this.ApiEndPoints=l["a"],this.getStores(),this.getDeparment()}},c=d,m=o("2877"),u=Object(m["a"])(c,r,a,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0bff41.0fbd9201.js.map