(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50741781"],{"09aa":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-card",{attrs:{header:t.$t("Orders")}},[r("b-table",{attrs:{dark:t.dark,"sort-by":t.sortBy,hover:t.hover,striped:t.striped,bordered:t.bordered,small:t.small,fixed:t.fixed,responsive:"lg",items:t.gridData,fields:t.captions,"current-page":t.currentPage,"per-page":t.perPage},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e}},scopedSlots:t._u([{key:"top-row",fn:function(e){var s=e.fields;return 1==t.currentPage?t._l(s,function(e){return r("td",{key:e.key},["actions"!=e.key&&"index"!=e.key?r("input",{directives:[{name:"model",rawName:"v-model",value:t.filters[e.key],expression:"filters[field.key]"}],staticClass:"form-control",attrs:{placeholder:" "+e.label},domProps:{value:t.filters[e.key]},on:{input:function(r){r.target.composing||t.$set(t.filters,e.key,r.target.value)}}}):t._e()])}):void 0}},{key:"index",fn:function(e){return[t._v("\n        "+t._s(e.index+1)+"\n      ")]}},{key:"actions",fn:function(e){return[r("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"icon mr-2 anchor-pointer",attrs:{title:t.$t("Check_Details")},on:{click:function(r){t.clearObjects(),t.selectObject(e.item),t.$refs.StoreDetailsModel.show()}}},[r("i",{staticClass:"fa font-2x2 fa-pencil",attrs:{id:"editIcon"}})])]}}],null,!0)}),0==t.gridData2.length?r("div",{staticClass:"pt-1 pb-4"},[r("div",{staticClass:"text-center"},[r("b-spinner",{attrs:{variant:"primary",label:"Text Centered"}})],1)]):t._e(),r("nav",[r("b-pagination",{staticClass:"pull-right",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,"prev-text":"Prev","next-text":"Next","hide-goto-end-buttons":""},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),r("b-modal",{ref:"StoreDetailsModel",staticClass:"modal-primary",attrs:{"no-close-on-backdrop":"",size:"lg","hide-footer":"",title:t.$t("Order_Details")}},[r("b-row",{staticStyle:{"border-bottom":"5px solid white"}},[r("b-col",{attrs:{md:"6"}},[r("label",[r("b",[t._v(t._s(t.$t("Order_ID")))])]),r("b-input-group",[r("b-form-input",{attrs:{type:"text",readonly:""},model:{value:t.order_Details_field.OrderNo,callback:function(e){t.$set(t.order_Details_field,"OrderNo",e)},expression:"order_Details_field.OrderNo"}})],1)],1),r("b-col",{attrs:{md:"6"}},[r("label",[r("b",[t._v(t._s(t.$t("Order_Date")))])]),r("b-input-group",[r("b-form-input",{attrs:{type:"text",readonly:""},model:{value:t.order_Details_field.OrderDate,callback:function(e){t.$set(t.order_Details_field,"OrderDate",e)},expression:"order_Details_field.OrderDate"}})],1)],1)],1),r("b-row",{staticStyle:{"border-bottom":"5px solid white"}},[r("b-col",{attrs:{md:"6"}},[r("label",[r("b",[t._v(t._s(t.$t("Payment_Status")))])]),r("b-input-group",[r("b-form-input",{attrs:{type:"text",readonly:""},model:{value:t.order_Details_field.PaymentStatus,callback:function(e){t.$set(t.order_Details_field,"PaymentStatus",e)},expression:"order_Details_field.PaymentStatus"}})],1)],1),r("b-col",{attrs:{md:"6"}},[r("label",[r("b",[t._v(t._s(t.$t("Total_Amount")))])]),r("b-input-group",[r("b-form-input",{attrs:{type:"text",readonly:""},model:{value:t.order_Details_field.TotalAmount,callback:function(e){t.$set(t.order_Details_field,"TotalAmount",e)},expression:"order_Details_field.TotalAmount"}})],1)],1)],1),r("b-row",{staticStyle:{"border-bottom":"5px solid white"}},[r("b-col",{attrs:{md:"6"}},[r("label",[r("b",[t._v(t._s(t.$t("Order_Delivery_Address")))])]),r("b-input-group",[r("b-form-input",{attrs:{type:"text",readonly:""},model:{value:t.order_Details_field.OrderDeliveryAddress,callback:function(e){t.$set(t.order_Details_field,"OrderDeliveryAddress",e)},expression:"order_Details_field.OrderDeliveryAddress"}})],1)],1)],1),r("br"),r("b-row",{staticStyle:{"border-bottom":"5px solid white"}},[r("b-col",{staticStyle:{"background-color":"#ef402b","border-radius":"25px","font-size":"19px","text-align":"center"},attrs:{md:"3"}},[r("label",{staticStyle:{color:"white"}},[r("b",[t._v(t._s(t.$t("Order_Items")))])])])],1),r("b-table",{attrs:{dark:t.dark,"sort-by":t.sortBy,hover:t.hover,striped:t.striped,bordered:t.bordered,small:t.small,fixed:t.fixed,responsive:"lg",items:t.storeGridData,fields:t.storecaptions,"current-page":t.currentPage,"per-page":t.selectedperPage},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e}},scopedSlots:t._u([{key:"show_details",fn:function(e){return[r("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:function(r){e.toggleDetails(),t.toggleData(e.index)}}},[t._v("\n\t\t\t\t\t"+t._s(e.detailsShowing?"- ":"+")+"\n\t\t\t\t\t")])]}},{key:"status",fn:function(e){return[r("b-form-select",{attrs:{required:""},model:{value:e.item.Status,callback:function(r){t.$set(e.item,"Status",r)},expression:"item.item.Status"}},t._l(t.orderStatusList,function(e){return r("option",{key:e.StatusId,domProps:{value:e.StatusId}},[t._v(t._s(e.StatusValue))])}),0)]}},{key:"actions",fn:function(e){return[t.showLoader!=e.item.StoreID?r("b-btn",{attrs:{size:"sm",id:e.item.StoreID},on:{click:function(r){t.showLoader=e.item.StoreID,t.UpdateStatus(e.item)}}},[t._v(t._s(t.$t("Update")))]):t._e(),t.showLoader==e.item.StoreID?r("b-button",{attrs:{variant:"primary",id:e.item.StoreID}},[r("b-spinner",{attrs:{small:""}}),r("span",{staticClass:"sr-only"},[t._v("Loading...")])],1):t._e()]}},{key:"row-details",fn:function(e){return[r("b-table",{staticStyle:{"margin-left":"25px"},attrs:{dark:t.dark,"sort-by":t.sortBy,hover:t.hover,striped:t.striped,bordered:t.bordered,small:t.small,fixed:t.fixed,responsive:"lg",items:t.innerGridData,fields:t.innerTableFields,"current-page":t.currentPage,"per-page":t.selectedperPage},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e}}})]}}]),model:{value:t.shownData,callback:function(e){t.shownData=e},expression:"shownData"}}),0==t.storeGridData.length?r("div",{staticClass:"pt-1 pb-4"},[r("b-button",{staticClass:"w-100",staticStyle:{"background-color":"#e4e5e6"}},[t._v(t._s(t.$t("No Records Found.")))])],1):t._e(),r("nav",[r("b-button",{staticClass:"float-right ml-2 ",attrs:{type:"button"},on:{click:function(e){return t.$refs.StoreDetailsModel.hide()}}},[r("i",{staticClass:"fa fa-close"}),t._v(" "+t._s(t.$t("Cancel")))])],1)],1)],1)},a=[],o=(r("6762"),r("2fdb"),r("ac6a"),r("456d"),r("e440")),i=r.n(o),l=r("9746"),n={props:{caption:{type:String,default:"Managers"},hover:{type:Boolean,default:!0},striped:{type:Boolean,default:!0},bordered:{type:Boolean,default:!1},small:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1},dark:{type:Boolean,default:!1}},data:function(){return{sortBy:"OrderNo",pageOptions:[5,10,15],currentPage:1,perPage:30,selectedperPage:10,file:null,images:[1,2,3,4],shownData:[],shownData2:[],get_status:{},filters:{OrderNo:"",OrderDate:""},orderStatus:null,orderStatusList:[],store_orderList:[{StoreID:null,StoreName:null,OrderID:null,OrderItemID:null,Items:[]}],store_orderList1:[{StoreID:null,StoreName:null,OrderID:null,OrderItemID:null,Items:[]}],strList:[{StoreID:null,StoreName:null,OrderID:null,Status:null,UserID:null,OrderItemID:null,OrderDeliveryAddress:null,Items:[]}],strList1:[{StoreID:null,StoreName:null,OrderID:null,Status:null,UserID:null,OrderItemID:null,OrderDeliveryAddress:null,Items:[]}],strAddress:[{StoreID:null,StoreName:null,OrderID:null,Status:null,UserID:null,OrderItemID:null,OrderDeliveryAddress:null,Items:[]}],orderList:[],showLoader:0,addressTableData:[],order_Details_field:{},orderItemsList:[],innerTableData:""}},computed:{fields:function(){return[{key:"index",label:this.translateString("No"),sortable:!0},{key:"OrderNo",label:this.translateString("Order_ID"),sortable:!0},{key:"OrderDate",label:this.translateString("Order_Date"),sortable:!0},{key:"TotalAmount",label:this.translateString("Total_Amount"),sortable:!0},{key:"PaymentStatus",label:this.translateString("Payment_Status"),sortable:!0},{key:"actions",label:this.translateString("Action"),sortable:!1,thStyle:{width:"80px !important","min-width":"80px !important"}}]},gridData2:function(){return this.orderList},gridData:function(){var t=this,e=this.orderList.filter(function(e){return Object.keys(t.filters).every(function(r){return String(e[r]).toLowerCase().includes(String(t.filters[r]).toLowerCase())})});return e.length>0?e:[{FirstName:"",LastName:""}]},totalRows:function(){return this.getRowCount()},captions:function(){return this.fields},innerStorefields:function(){return[{key:"show_details",label:this.translateString(""),thStyle:{width:"115px !important","min-width":"115px !important"}},{key:"StoreName",label:this.translateString("Store_Name"),sortable:!0},{key:"DeliveryMode",label:this.translateString("Delivery_Mode"),sortable:!0},{key:"status",label:this.translateString("Status"),sortable:!1,thStyle:{width:"200px !important","min-width":"200px !important"}},{key:"actions",label:this.translateString("Action"),sortable:!1,thStyle:{width:"80px !important","min-width":"80px !important"}}]},storeGridData:function(){return this.strList},totalStoreRows:function(){return this.getRowStoreCount()},storecaptions:function(){return this.innerStorefields},innerFields:function(){return[{key:"ProductName",label:this.translateString("Product_Name"),sortable:!0,thStyle:{"margin-left":"10px"}},{key:"Quantity",label:this.translateString("Quantity"),sortable:!0},{key:"Amount",label:this.translateString("Amount"),sortable:!0}]},innerGridData:function(){return this.innerTableData},innerTableFields:function(){return this.innerFields},addressFields:function(){return[{key:"OrderNo",label:this.translateString("Order_ID"),sortable:!0},{key:"OrderDeliveryAddress",label:this.translateString("Order_Delivery_Address"),sortable:!0},{key:"PaymentStatus",label:this.translateString("Payment_Status"),sortable:!0}]},addressGridData:function(){return this.addressTableData},addressTableFields:function(){return this.addressFields}},methods:{translateString:function(t){return this.$i18n.t(t)},getRowCount:function(){return this.orderList.length},getRowStoreCount:function(){return 20},selectObject:function(t){console.log("selected Order Items :",t),this.addressTableData[0]=t,this.order_Details_field=t,this.orderItemsList=t.orderItems,this.getStoreList(t)},toggleData:function(t){var e=this;this.strList.forEach(function(r,s){s!==t&&r._showDetails?r._showDetails=!1:s===t&&(e.innerTableData=r.Items)})},selectedAddressData:function(t){var e=this;this.strList.forEach(function(r,s){s!==t&&r._showDetails?r._showDetails=!1:s===t&&(e.innerTableData=r.Items)})},deleteItem:function(t){console.log("in delete function")},UpdateStatus:function(t){this.getUpdateOrderStatus(t)},updateItem:function(t){console.log("in update function")},getStoreOrderList:function(t){var e=[];if(t.length>0){for(var r=0;r<t.length;r++)if(t[r].orderItems.length>0)for(var s=0;s<t[r].orderItems.length;s++)e.includes(t[r].orderItems[s].StoreID)||e.push(t[r].orderItems[s].StoreID);for(var a=0;a<e.length;a++){a>0&&(this.store_orderList1=[{StoreID:null,StoreName:null,DeliveryMode:null,OrderID:null,OrderItemID:null,Items:[]}],this.store_orderList.push(this.store_orderList1[0]));for(var o=0;o<t.length;o++)for(var i=0;i<t[o].orderItems.length;i++){var l=e[a],n=t[o].orderItems[i].StoreID;l==n&&(this.store_orderList[a].StoreID=t[o].orderItems[i].StoreID,this.store_orderList[a].StoreName=t[o].orderItems[i].StoreName,this.store_orderList[a].OrderID=t[o].orderItems[i].OrderID,this.store_orderList[a].DeliveryMode=t[o].orderItems[i].DeliveryMode,this.store_orderList[a].OrderItemID=t[o].orderItems[i].OrderItemID,this.store_orderList[a].Items.push(t[o].orderItems[i]))}}}},changeOrderStatus:function(t,e){e.status=t},getStoreList:function(t){for(var e=t.orderItems,r=[],s=0;s<e.length;s++)for(var a=0;a<this.orderStatusList.length;a++)e[s].StatusValue==this.orderStatusList[a].StatusValue&&(e[s]["Status"]=this.orderStatusList[a].StatusId);if(e.length>0){for(var o=0;o<e.length;o++)r.includes(e[o].StoreID)||r.push(e[o].StoreID);for(var i=0;i<r.length;i++){i>0&&(this.strList1=[{StoreID:null,StoreName:null,OrderDeliveryAddress:null,DeliveryMode:null,OrderID:null,Status:null,UserID:null,OrderItemID:null,Items:[]}],this.strList.push(this.strList1[0]));for(o=0;o<e.length;o++){var l=r[i],n=e[o].StoreID;l==n&&(this.strList[i].StoreID=e[o].StoreID,this.strList[i].StoreName=e[o].StoreName,this.strList[i].OrderDeliveryAddress=e[o].OrderDeliveryAddress,this.strList[i].OrderID=e[o].OrderID,this.strList[i].UserID=t.UserID,this.strList[i].Status=parseInt(e[o].Status),this.strList[i].DeliveryMode="H"==e[o].DeliveryMode?"At Delivery Address":"At Store",this.strList[i].OrderItemID=e[o].OrderItemID,this.strList[i].Items.push(e[o]))}}}},saveItem:function(){},clearObjects:function(){this.strList1=[{StoreID:null,StoreName:null,OrderDeliveryAddress:null,OrderID:null,DeliveryMode:null,OrderItemID:null,Items:[]}],this.strList=[{StoreID:null,StoreName:null,OrderDeliveryAddress:null,DeliveryMode:null,OrderID:null,OrderItemID:null,Items:[]}],this.addressTableData=[{StoreID:null,StoreName:null,OrderDeliveryAddress:null,DeliveryMode:null,OrderID:null,OrderItemID:null,Items:[]}],this.order_Details_field={}},getOrderStatus:function(){var t=this;l["c"]("order/master/status").then(function(e){t.orderStatusList=e.data})},getUpdateOrderStatus:function(t){var e=this,r=null,s=new FormData;s.append("Status",t.Status),s.append("UserID",t.UserID),r="order/store/status/update/"+t.StoreID+"/"+t.OrderID,l["e"](s,r).then(function(t){var r=t.data[0].message;200==t.status&&"Success"==r?(e.showLoader=0,e.getOrders(),i.a.success({message:e.translateString("Store_Status_Updated_Successfully_Saved"),timeout:2500})):(e.showLoader=0,i.a.error({message:e.translateString(r),timeout:2500}))})},getOrders:function(){var t=this;this.loginUser=JSON.parse(window.localStorage.getItem("loginUser"));var e=null;e="M"==this.loginUser.Role?"orders/user/store/"+this.loginUser.Users[0].StoreID:"orders",l["c"](e).then(function(e){t.orderList=e.data;for(var r=0;r<t.orderList.length;r++)t.orderList[r].PaymentStatus="Y"==t.orderList[r].PaymentStatus?"Done":"Pending";t.getStoreOrderList(t.orderList)})}},beforeMount:function(){this.getOrders(),this.getOrderStatus()}},d=n,u=r("2877"),c=Object(u["a"])(d,s,a,!1,null,null,null);e["default"]=c.exports},"456d":function(t,e,r){var s=r("4bf8"),a=r("0d58");r("5eda")("keys",function(){return function(t){return a(s(t))}})},"5eda":function(t,e,r){var s=r("5ca1"),a=r("8378"),o=r("79e5");t.exports=function(t,e){var r=(a.Object||{})[t]||Object[t],i={};i[t]=e(r),s(s.S+s.F*o(function(){r(1)}),"Object",i)}}}]);
//# sourceMappingURL=chunk-50741781.1c89a8ca.js.map